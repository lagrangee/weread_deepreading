# Floating Menu 设计规范

本文档记录微信读书助手浮动菜单的设计需求与交互规范。

## 1. 默认位置与尺寸

- 默认出现在屏幕右侧
- 默认宽度：视口宽度的 30%
- 默认高度：视口高度的 80%
- 支持用户自由拖动（drag）
- 支持用户自由调整大小（resize）

## 2. 键盘快捷键

为以下操作提供全局键盘快捷键：

- **解释（Explain）**：示例 `E`
- **消化（Digest）**：示例 `D`
- **分析（Multi-view）**：示例 `M`
- **关闭窗口**：示例 `Esc`

> 快捷键方案提供自定义

## 3. Markdown 渲染

- AI 返回的内容为 Markdown 格式
- 在浮动菜单中集成 Markdown 渲染器（如 `marked`、`markdown-it` 等）
- 必须支持常见 Markdown 语法：
  - 标题、列表、引用、粗体/斜体
  - 代码块、行内代码（支持语法高亮）
  - 链接、图片、表格

## 4. 会话式交互

- AI 返回的内容以对话气泡（chat bubble）形式追加到当前窗口中
- 窗口底部提供输入框，允许用户输入后续提问或指令
- 用户提交后，将输入内容发送给 AI，AI 回复追加到对话列表末尾
- 对话列表支持自动滚动到底部，保持最新消息可见
- 保持会话上下文，方便用户连续交互

## 5. 注意 content 环境下的限制

- content.js 不支持 ES 语法
